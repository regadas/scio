<html><head><title>scio: Scio, Scalding and Spark</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="docs" /><meta name="description" content="Scio, a Scala API for Apache Beam and Google Cloud Dataflow inspired by Apache Spark and Scalding." /><meta name="og:image" content="/scio/img/poster.png" /><meta name="og:title" content="scio: Scio, Scalding and Spark" /><meta name="og:site_name" content="scio" /><meta name="og:url" content="https://regadas.github.io/scio/" /><meta name="og:type" content="website" /><meta name="og:description" content="Scio, a Scala API for Apache Beam and Google Cloud Dataflow inspired by Apache Spark and Scalding." /><link rel="icon" type="image/png" href="/scio/img/favicon.png" /><meta name="twitter:title" content="scio: Scio, Scalding and Spark" /><meta name="twitter:image" content="https://regadas.github.io/scio/img/poster.png" /><meta name="twitter:description" content="Scio, a Scala API for Apache Beam and Google Cloud Dataflow inspired by Apache Spark and Scalding." /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scio/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scio/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scio/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scio/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scio/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scio/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scio/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scio/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scio/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scio/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scio/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scio/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scio/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scio/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scio/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scio/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scio/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scio/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scio/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scio/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scio/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/scio/css/style.css" /><link rel="stylesheet" href="/scio/css/palette.css" /><link rel="stylesheet" href="/scio/css/codemirror.css" /><link rel="stylesheet" href="/scio/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scio/" class="brand"><div class="brand-wrapper"><span>scio</span></div></a></li> <li><a href="/scio/docs/index.html" class="">Getting Started</a></li> <li><a href="/scio/docs/Scio-REPL.html" class="">REPL</a></li> <li><a href="/scio/docs/Scio,-Beam-and-Dataflow.html" class="">Scio, Beam and Dataflow</a></li> <li><a href="/scio/docs/Scio,-Scalding-and-Spark.html" class=" active ">Scio, Scalding and Spark</a></li> <li><a href="/scio/docs/Apache-Beam.html" class="">Apache Beam</a></li> <li><a href="/scio/docs/Runners.html" class="">Runners</a></li> <li><a href="/scio/docs/Scio-data-guideline.html" class="">Scio data guideline</a></li> <li><a href="/scio/docs/FAQ.html" class="">FAQ</a></li> <li><a href="/scio/docs/Powered-By.html" class="">Powered By</a></li> <li><a href="/scio/docs/HDFS.html" class="">IO</a> <ul class="sub_section"> <li><a href="/scio/docs/HDFS.html" class="">HDFS</a></li> <li><a href="/scio/docs/Avro.html" class="">Avro</a></li> <li><a href="/scio/docs/Bigtable.html" class="">Bigtable</a></li> <li><a href="/scio/docs/Protobuf.html" class="">Protobuf</a></li> <li><a href="/scio/docs/Parquet.html" class="">Parquet</a></li></ul></li> <li><a href="/scio/docs/Algebird.html" class="">Extras</a> <ul class="sub_section"> <li><a href="/scio/docs/Algebird.html" class="">Algebird</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/regadas/scio"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/regadas/scio"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scio Scio, a Scala API for Apache Beam and Google Cloud Dataflow inspired by Apache Spark and Scalding.');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scio Scio, a Scala API for Apache Beam and Google Cloud Dataflow inspired by Apache Spark and Scalding.');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="regadas" data-github-repo="scio"><div class="content-wrapper"><section><p>Check out the <a href="https://beam.apache.org/documentation/programming-guide/">Beam Programming Guide</a> first for a detailed explanation of the Beam programming model and concepts. Also read more about the relationship between [[Scio, Beam and Dataflow]].</p>

<p>Scio’s API is heavily influenced by Spark with a lot of ideas from Scalding.</p>

<h2 id="scio-and-spark">Scio and Spark</h2>

<p>The Dataflow programming model is fundamentally different from that of Spark. Read this Google <a href="https://cloud.google.com/dataflow/blog/dataflow-beam-and-spark-comparison">blog article</a> for more details.</p>

<p>The Scio API is heavily influenced by Spark but there are some minor differences.</p>

<ul>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html"><code class="highlighter-rouge">SCollection</code></a> is equivalent to Spark’s <a href="https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.rdd.RDD"><code class="highlighter-rouge">RDD</code></a>.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/PairSCollectionFunctions.html"><code class="highlighter-rouge">PairSCollectionFunctions</code></a> and <a href="http://spotify.github.io/scio/api/com/spotify/scio/values/DoubleSCollectionFunctions.html"><code class="highlighter-rouge">DoubleSCollectionFunctions</code></a> are specialized versions of <code class="highlighter-rouge">SCollection</code> and equivalent to Spark’s <a href="https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.rdd.PairRDDFunctions"><code class="highlighter-rouge">PairRDDFunctions</code></a> and <a href="https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.rdd.DoubleRDDFunctions"><code class="highlighter-rouge">DoubleRDDFunctions</code></a>.</li>
  <li>Execution planning is static and happens before the job is submitted. There is no driver node in a Dataflow cluster and one can only perform the equivalent of Spark <a href="http://spark.apache.org/docs/latest/programming-guide.html#transformations"><em>transformations</em></a> (<code class="highlighter-rouge">RDD</code> → <code class="highlighter-rouge">RDD</code>) but not <a href="http://spark.apache.org/docs/latest/programming-guide.html#actions"><em>actions</em></a> (<code class="highlighter-rouge">RDD</code> → driver local memory).</li>
  <li>There is no <a href="http://spark.apache.org/docs/latest/programming-guide.html#broadcast-variables"><em>broadcast</em></a> either but the pattern of <code class="highlighter-rouge">RDD</code> → driver via <em>action</em> and driver → <code class="highlighter-rouge">RDD</code> via <em>broadcast</em> can be replaced with <code class="highlighter-rouge">SCollection.asSingletonSideInput</code> and <code class="highlighter-rouge">SCollection.withSideInputs</code>.</li>
  <li>There is no <a href="https://spark.apache.org/docs/latest/streaming-programming-guide.html#discretized-streams-dstreams"><code class="highlighter-rouge">DStream</code></a> (continuous series of <code class="highlighter-rouge">RDD</code>s) like in Spark Streaming. Values in a <code class="highlighter-rouge">SCollection</code> are windowed based on timestamp and windowing operation. The same API works regardless of batch (single global window by default) or streaming mode. Aggregation type <em>transformations</em> that produce <code class="highlighter-rouge">SCollection</code>s of a single value under global window will produce one value each window when a non-global window is defined.</li>
  <li><code class="highlighter-rouge">SCollection</code> has extra methods for side input, side output, and windowing.</li>
</ul>

<h2 id="scio-and-scalding">Scio and Scalding</h2>

<p>Scio has a much simpler abstract data types compared to Scalding.</p>

<ul>
  <li>Scalding has many abstract data types like <a href="https://twitter.github.io/scalding/api/#com.twitter.scalding.typed.TypedPipe"><code class="highlighter-rouge">TypedPipe</code></a>, <a href="https://twitter.github.io/scalding/api/index.html#com.twitter.scalding.typed.Grouped"><code class="highlighter-rouge">Grouped</code></a>, <a href="https://twitter.github.io/scalding/api/index.html#com.twitter.scalding.typed.CoGrouped"><code class="highlighter-rouge">CoGrouped</code></a>, <a href="https://twitter.github.io/scalding/api/index.html#com.twitter.scalding.typed.SortedGrouped"><code class="highlighter-rouge">SortedGrouped</code></a>.</li>
  <li>Many of them are intermediate and enable some optimizations or wrap around <a href="http://www.cascading.org/">Cascading</a>’s data model.</li>
  <li>As a result many Scalding operations are lazily evaluated, for example in <code class="highlighter-rouge">pipe.groupBy(keyFn).reduce(mergeFn)</code>, <code class="highlighter-rouge">mergeFn</code> is lifted into <code class="highlighter-rouge">groupBy</code> to operate on the map side as well.</li>
  <li>Scio on the other hand, has only one main data type <code class="highlighter-rouge">SCollection[T]</code> and <code class="highlighter-rouge">SCollection[(K, V)]</code> is a specialized variation when the elements are key-value pairs.</li>
  <li>All Scio operations are strictly evaluated, for example <code class="highlighter-rouge">p.groupBy(keyFn)</code> returns <code class="highlighter-rouge">(K, Iterable[T])</code> where the values are immediately grouped, whereas <code class="highlighter-rouge">p.reduceByKey(_ + _)</code> groups <code class="highlighter-rouge">(K, V)</code> pairs on <code class="highlighter-rouge">K</code> and reduces values.</li>
</ul>

<p>Some features may look familiar to Scalding users.</p>

<ul>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/Args.html"><code class="highlighter-rouge">Args</code></a> is a simple command line argument parser similar to the one in Scalding.</li>
  <li>Powerful transforms are possible with <code class="highlighter-rouge">sum</code>, <code class="highlighter-rouge">sumByKey</code>, <code class="highlighter-rouge">aggregate</code>, <code class="highlighter-rouge">aggregrateByKey</code> using <a href="https://github.com/twitter/algebird">Algebird</a> <code class="highlighter-rouge">Semigroup</code>s and <code class="highlighter-rouge">Aggregator</code>s.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/util/MultiJoin$.html"><code class="highlighter-rouge">MultiJoin</code></a> and coGroup of up to 22 sources.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/testing/JobTest$.html"><code class="highlighter-rouge">JobTest</code></a> for end to end pipeline testing.</li>
</ul>

<h2 id="scollection">SCollection</h2>

<p><code class="highlighter-rouge">SCollection</code> has a few variations.</p>

<ul>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/SCollectionWithSideInput.html"><code class="highlighter-rouge">SCollectionWithSideInput</code></a> for replicating small <code class="highlighter-rouge">SCollection</code>s to all left-hand side values in a large <code class="highlighter-rouge">SCollection</code>.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/SCollectionWithSideOutput.html"><code class="highlighter-rouge">SCollectionWithSideOutput</code></a> for output to multiple SCollections.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/WindowedSCollection.html"><code class="highlighter-rouge">WindowedSCollection</code></a> for accessing window information.</li>
  <li><a href="http://spotify.github.io/scio/api/com/spotify/scio/values/SCollectionWithFanout.html"><code class="highlighter-rouge">SCollectionWithFanout</code></a> and <a href="http://spotify.github.io/scio/api/com.spotify.scio.values.SCollectionWithHotKeyFanout"><code class="highlighter-rouge">SCollectionWithHotKeyFanout</code></a> for fanout of skewed data.</li>
</ul>

<h2 id="additional-features">Additional features</h2>

<p>Scio also offers some additional features.</p>

<ul>
  <li>Each worker can pull files from Google Cloud Storage via <a href="http://spotify.github.io/scio/api/com/spotify/scio/values/DistCache.html"><code class="highlighter-rouge">DistCache</code></a> to be used in transforms locally, similar to Hadoop distributed cache. See <a href="https://github.com/spotify/scio/blob/master/scio-examples/src/main/scala/com/spotify/scio/examples/extra/DistCacheExample.scala">DistCacheExample.scala</a>.</li>
  <li>Type safe BigQuery IO via Scala macros. Case classes and converters are generated at compile time based on BQ schema. This eliminates the error prone process of handling generic JSON objects. See <a href="https://github.com/spotify/scio/blob/master/scio-examples/src/test/scala/com/spotify/scio/examples/extra/TypedBigQueryTornadoes.scala">TypedBigQueryTornadoes.scala</a>.</li>
  <li>Sinks (<code class="highlighter-rouge">saveAs*</code> methods) return <code class="highlighter-rouge">Future[Tap[T]]</code> that can be opened either in another pipeline as <code class="highlighter-rouge">SCollection[T]</code> or directly as <code class="highlighter-rouge">Iterator[T]</code> once the current pipeline completes. This enables complex pipeline orchestration. See <a href="https://github.com/spotify/scio/blob/master/scio-examples/src/main/scala/com/spotify/scio/examples/extra/WordCountOrchestration.scala">WordCountOrchestration.scala</a>.</li>
</ul>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scio/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'regadas/scio'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scio/js/main.js"></script></body></html>